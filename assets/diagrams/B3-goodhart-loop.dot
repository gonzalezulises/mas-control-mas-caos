digraph GoodhartLoop {
    // Layout circular
    layout=neato;
    bgcolor="white";
    pad=0.5;
    splines=curved;

    // Estilo global
    node [
        shape=box,
        style="rounded,filled",
        fontname="Arial",
        fontsize=10,
        penwidth=2
    ];

    edge [
        penwidth=2.5,
        color="#555555",
        arrowsize=0.8
    ];

    // Titulo
    title [label="LEY DE GOODHART\n\"Cuando una metrica se convierte en objetivo,\ndeja de ser una buena metrica\"",
           shape=plaintext, fontsize=11, fontname="Arial Bold", pos="0,4!"];

    // Loop principal (sentido horario)
    M [label="METRICA\nse establece como\nindicador de exito",
       fillcolor="#e3f2fd", color="#1976d2", width=2.3, height=0.9, pos="0,2!"];

    O [label="OBJETIVO\nla metrica determina\nrecompensas y\nconsequencias",
       fillcolor="#c8e6c9", color="#388e3c", width=2.3, height=0.9, pos="2.5,0!"];

    OPT [label="OPTIMIZACION\nactores racionales\noptimizar PARA\nla metrica",
         fillcolor="#fff8e1", color="#f57c00", width=2.3, height=0.9, pos="0,-2!"];

    DIV [label="DIVERGENCIA\nla metrica mejora\nmientras la realidad\nse deteriora",
         fillcolor="#ffcdd2", color="#c62828", width=2.3, height=0.9, pos="-2.5,0!"];

    // Conexiones del loop
    M -> O [label=" consecuencias ", fontsize=8, fontcolor="#666666"];
    O -> OPT [label=" respuesta racional ", fontsize=8, fontcolor="#666666"];
    OPT -> DIV [label=" resultado agregado ", fontsize=8, fontcolor="#666666"];
    DIV -> M [label=" metrica sigue\n mejorando ", fontsize=8, fontcolor="#c62828", color="#c62828", style=bold];

    // Ejemplo: Wells Fargo
    ejemplo [label="WELLS FARGO (2002-2016)\n\n\"Eight is great\": 8 productos por cliente\n→ 2 millones de cuentas fraudulentas\n→ Metricas de cross-sell mejoraban\n→ Controles existian pero median proceso,\n   no realidad",
             shape=note,
             fillcolor="#f5f5f5",
             color="#9e9e9e",
             fontsize=9,
             width=3.5,
             height=1.4,
             pos="0,-5!"];
}
